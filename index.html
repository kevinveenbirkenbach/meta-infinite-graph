<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meta Infinite Graph</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet">

  <!-- Font Awesome -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Top navbar with toggle -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <button class="btn btn-outline-light" type="button"
              data-bs-toggle="collapse" data-bs-target="#sidebar">
        <i class="fa-solid fa-bars"></i>
      </button>
      <span class="navbar-brand ms-2">
        <i class="fa-solid fa-project-diagram me-1"></i>
        Meta Infinite Graph
      </span>
    </div>
  </nav>

  <!-- 3D-graph canvas -->
  <div id="3d-graph"></div>

  <!-- Sidebar: static collapse, shown by default -->
  <div id="sidebar" class="collapse show">
    <div class="p-3 border-bottom">

      <!-- Role + description + selector -->
      <div class="mb-3">
  <h5 id="role-name" class="mb-1"></h5>
  <div id="role-desc" class="small text-wrap mb-2"></div>

  <!-- New: Role search field -->
  <label for="role-search" class="form-label">Search Role</label>
  <input
    type="text"
    id="role-search"
    class="form-control form-control-sm mb-2"
    placeholder="Type to filter…"
  />

  <!-- Role dropdown -->
  <label for="sel-role" class="form-label">Role</label>
  <select id="sel-role" class="form-select"></select>
</div>

      <!-- Mapping checkboxes -->
      <fieldset id="mapping-controls" class="mb-3">
        <legend class="form-label">Mappings</legend>
      </fieldset>

      <hr/>

      <!-- Compact control bar -->
      <div class="input-group input-group-sm mb-3">
        <button id="btn-start" class="btn btn-primary">
          <i class="fa-solid fa-play"></i>
        </button>
        <button id="btn-stop" class="btn btn-secondary" disabled>
          <i class="fa-solid fa-pause"></i>
        </button>
        <span class="input-group-text">Interval</span>
        <input id="iter-interval"
               type="number"
               class="form-control text-center"
               min="0.1"
               step="0.1"
               value="0.5"
               title="Seconds"/>
        <button id="btn-zoom-in" class="btn btn-outline-dark">
          <i class="fa-solid fa-search-plus"></i>
        </button>
        <button id="btn-zoom-out" class="btn btn-outline-dark">
          <i class="fa-solid fa-search-minus"></i>
        </button>
        <button id="btn-reload" class="btn btn-outline-primary" title="Reload Graph">
            <i class="fa-solid fa-arrows-rotate"></i>
          </button>
      </div>

      <hr/>

      <!-- Legend -->
      <div class="mb-3 small">
        <div><span class="legend-dot bg-purple"></span>Start node</div>
        <div><span class="legend-dot bg-pink"></span>Selected</div>
        <div><span class="legend-dot bg-orange"></span>Unloaded</div>
        <div><span class="legend-dot bg-green"></span>Internal</div>
        <div><span class="legend-dot bg-red"></span>Leaf</div>
      </div>

      <hr/>

      <!-- Details panel -->
      <div id="details" class="small"></div>

      <hr/>

      <!-- Footer links -->
      <div class="small text-center">
        <a href="https://github.com/kevinveenbirkenbach/meta-infinite-graph" target="_blank">
          <i class="fa-brands fa-github"></i> Source
        </a> •
        <a href="https://www.veen.world" target="_blank">
          <i class="fa-solid fa-user"></i> Kevin Veen-Birkenbach
        </a> •
        <i class="fa-solid fa-scale-balanced"></i> MIT License
      </div>
    </div>
  </div>

  <!-- Libraries & scripts -->
  <script src="https://unpkg.com/three@0.146.0/build/three.min.js"></script>
  <script src="https://unpkg.com/3d-force-graph/dist/3d-force-graph.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Your app files -->
  <script src="dataLoader.js"></script>
  <script src="selectionManager.js"></script>
  <script src="autoResolver.js"></script>
  <script src="graphRenderer.js"></script>
  <script src="uiManager.js"></script>
  <script src="app.js"></script>
</body>
</html>
